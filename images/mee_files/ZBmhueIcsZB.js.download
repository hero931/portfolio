if (self.CavalryLogger) { CavalryLogger.start_js(["ZMTof"]); }

__d("FileUploadTarget",["AsyncUploadRequest","DragDropFileUpload","DragDropTarget","emptyFunction"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c){"use strict";__p&&__p();var d=function(d){this.$1=new(b("AsyncUploadRequest"))(c).setFiles({file:d}).setRelativeTo(a).setStatusElement(a).setAllowCrossOrigin(this.$2),this.$1.subscribe("complete",function(a,b){this.onCompleteCallback(b),this.$1=null}.bind(this)),this.$1.send()}.bind(this);this.dragDropTarget=new(b("DragDropTarget"))(a).setOnFilesDropCallback(function(a){a.length&&this.asyncProcess(a,function(a){a.length&&d(a)})}.bind(this));this.asyncProcess=function(a,b){b(a)};this.preprocess=function(a){return a};this.onCompleteCallback=b("emptyFunction")}a.prototype.setAllowCrossOrigin=function(a){"use strict";this.$2=a;return this};a.prototype.setPreprocessor=function(a){"use strict";this.preprocess=a;return this};a.prototype.setAsyncProcessor=function(a){"use strict";this.asyncProcess=a;return this};a.prototype.onComplete=function(a){"use strict";this.onCompleteCallback=a;return this};a.prototype.abort=function(){"use strict";this.$1&&this.$1.abort()};a.prototype.activate=function(){"use strict";if(!b("DragDropFileUpload").isSupported())return this;this.dragDropTarget.setFileFilter(this.preprocess).enable();return this};e.exports=a}),null);
__d("SinglePictureUploadTarget",["fbt","Bootloader","Dialog","ErrorDialog","FileUploadTarget","emptyFunction","htmlSpecialChars"],(function(a,b,c,d,e,f,g){__p&&__p();function a(a,c){"use strict";this.fileUploadTarget=new(b("FileUploadTarget"))(a,c),this.preprocessCallback=b("emptyFunction"),this.asyncPreprocessCallback=function(a,b){b(a)},this.oncompleteCallback=b("emptyFunction"),this.afterSuccessCallback=b("emptyFunction")}a.prototype.setAllowCrossOrigin=function(a){"use strict";this.fileUploadTarget.setAllowCrossOrigin(a);return this};a.prototype.setPreprocessCallback=function(a){"use strict";this.preprocessCallback=a;return this};a.prototype.setAsyncPreprocessCallback=function(a){"use strict";this.asyncPreprocessCallback=a;return this};a.prototype.setOncompleteCallback=function(a){"use strict";this.oncompleteCallback=a;return this};a.prototype.setAfterSuccessCallback=function(a){"use strict";this.afterSuccessCallback=a;return this};a.prototype.activate=function(){"use strict";__p&&__p();var a=function(a){return b("htmlSpecialChars")(a.name)},c=function(c){c.length>1&&(b("ErrorDialog").show(g._("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"),g._("You can only select 1 photo to upload to this album. Only the first photo you selected will be uploaded.")),c=[c[0]]);var d=c[0];if(!d.type.match(/^image\//)){b("ErrorDialog").show(g._("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"),g._("\u041c\u044b \u043d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 {filename}. \u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044c, \u0447\u0442\u043e \u0444\u0430\u0439\u043b \u0438\u043c\u0435\u0435\u0442 \u0444\u043e\u0440\u043c\u0430\u0442 jpg, png \u0438\u043b\u0438 gif.",[g._param("filename",a(d))]));return[]}this.preprocessCallback(c);return c}.bind(this),d=function(c,d){__p&&__p();var e=1024*1024*16,f=1024*1024*1,h=function(f){f.size>e?(b("ErrorDialog").show(g._("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0435"),g._("{filename} \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0440 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043d\u0430 \u0440\u0430\u0437\u043c\u0435\u0440 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435, \u0447\u0435\u043c 8000x8000 \u043f\u0438\u043a\u0441\u0435\u043b\u0435\u0439 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.",[g._param("filename",a(c[0]))])),d([])):this.asyncPreprocessCallback([f],d)}.bind(this),i=c[0];i.size<f?h(i):b("Bootloader").loadModules(["ImageExif","ImageResizer"],function(a,b){__p&&__p();if(!b.isSupported()){h(i);return}var c=new b(i,null,null);c.subscribe("resized",function(a,b){b.size>i.size?h(i):h(b)}.bind(this));c.subscribe("error",function(){h(i)}.bind(this));a.readFromFile(i,function(a){a&&c.setOrientation(a.Orientation),c.resize()})},"SinglePictureUploadTarget")}.bind(this),e=function(a){__p&&__p();a=a[0];if(!a.getResponse())return;this.oncompleteCallback(a);var c=a.getResponse().getPayload();if(a.isSuccess())this.afterSuccessCallback(c);else if(c&&c.__dialog){a=new(b("Dialog"))();a.$1(c.__dialog);a.setButtons(b("Dialog").OK).show()}else b("ErrorDialog").show(c.error.title,c.error.body)}.bind(this);return this.fileUploadTarget.onComplete(e).setPreprocessor(c).setAsyncProcessor(d).activate()};e.exports=a}),null);
__d("ProfileIntroCardEditMediaFunnelLoggerEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({SAVE:"save",INTRO_CARD_EDIT:"intro_card_edit",SINGLE_EDIT:"single_edit",SEE_DIALOG:"see_dialog",OPEN_PICKER:"open_picker",ADD_MEDIA:"add_media",REMOVE_MEDIA:"remove_media",SEARCH:"search",SEE_MORE:"see_more",SECTION_NAMES_LOADED:"section_names_loaded",SECTION_LOADED:"section_loaded",ALL_SECTIONS_LOADED:"all_sections_loaded",EMPTY_SECTION_LOADED:"empty_section_loaded",UPLOAD_START:"upload_start",UPLOAD_SUCCESS:"upload_succes"})}),null);
__d("ProfileIntroCardEditMediaFunnelLogger",["Event","FunnelLogger","ProfileIntroCardEditMediaFunnelLoggerEvent"],(function(a,b,c,d,e,f){__p&&__p();var g="WWW_PROFILE_INTRO_CARD_EDIT_MEDIA_FUNNEL";function a(a){b("Event").listen(a,"click",function(){b("FunnelLogger").endFunnel(g)})}function c(a){b("Event").listen(a,"click",function(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").SAVE),b("FunnelLogger").endFunnel(g)})}function d(a){b("Event").listen(a,"click",function(){b("FunnelLogger").startFunnel(g),b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").INTRO_CARD_EDIT)})}function f(){b("FunnelLogger").addFunnelTag(g,"in_new_editor")}function h(a){b("Event").listen(a,"click",function(){b("FunnelLogger").startFunnel(g),b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").SINGLE_EDIT)})}function i(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").SEE_DIALOG)}function j(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").OPEN_PICKER)}function k(a){b("Event").listen(a,"click",function(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").ADD_MEDIA)})}function l(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").ADD_MEDIA)}function m(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").REMOVE_MEDIA)}function n(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").SEARCH)}function o(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").SEE_MORE)}function p(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").SECTION_NAMES_LOADED)}function q(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").SECTION_LOADED)}function r(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").EMPTY_SECTION_LOADED)}function s(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").ALL_SECTIONS_LOADED)}function t(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").UPLOAD_START)}function u(){b("FunnelLogger").appendAction(g,b("ProfileIntroCardEditMediaFunnelLoggerEvent").UPLOAD_SUCCESS)}e.exports={logCancel:a,logSave:c,logSeeDialog:i,logSingleEdit:h,logIntroCardEdit:d,logOpenPicker:j,logAddMedia:k,directlyLogAddMedia:l,directlyLogRemoveMedia:m,logSearch:n,logSeeMore:o,logSectionNamesLoaded:p,logSeeMoreSectionLoaded:q,logAllSectionsInitialLoad:s,logEmptySectionLoaded:r,logUploadStart:t,logUploadSuccess:u,addNewEditorTag:f}}),null);
__d("ProfilePicAccessibility",["csx","cx","CSS","FocusEvent","Parent","Run","ifRequired"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=null,j=[],k=[],l=!1;function m(a){i&&b("CSS").conditionClass(i,"_5-3g",a||l)}function n(a){l=a,m(a)}function o(){i=null,j.map(function(a){return a.unsubscribe()}),j=[],k.map(function(a){return a.remove()}),k=[]}a={init:function(a,c){__p&&__p();if(a.length===0)return;var d=b("Parent").bySelector(a[0],"._5ycb");i=d instanceof HTMLElement?d:null;k=a.map(function(a){return b("FocusEvent").listen(a,m)});c&&(j=[c.subscribe("show",n.bind(null,!0)),c.subscribe("hide",n.bind(null,!1))]);b("ifRequired")("XUISubNavigationLoader",function(a){return a.onLeave(o)},function(){return b("Run").onLeave(o)})}};e.exports=a}),null);
__d("PhotoSourceTypeConst",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({WEB:0,MOBILE:1,WEBCAM:2,HTML5:4,FLASH:6,SIMPLE:7,COMPOSER:8,PROFILE_PIC:9,TIMELINE_COVER_PHOTO:10,MULLIGAN2:11,TIMELINE_LIFE_EVENT_PHOTO:12,GROUP_EMAIL:13,TIMELINE_MAP_PHOTO:14,UNITTEST:15,VAULT:16,USER_TO_PAGE_MIGRATION:18,COMMENT_PHOTO_ATTACHMENT:19,CAMPFIRE:21,STORY:22,WEB_SAY_THANKS:26,TIMELINE_PHOTOS_TAB:27,COMPOSER_CAMERA:28,MESSENGER:29,INSTANT_ARTICLES:30,FAMILY_TAG_COVER_PHOTO:31,COMPANY_LOGO:32,CANVAS:33,BIRTHDAY_COMPOSER:34,LEAD_GEN:35,TAROT_CARD:36,INTRO_CARD:37,CHECKPOINT_STEP_IMAGE_UPLOAD:38,PROFILE_SET:39,FUN_FACT_ANSWER:40,APP_CONTENT:41,PROFILE_PHOTO_SHIELD:42,STONEHENGE_VALUE_PROPS:43,SPUTNIK:44,WOODHENGE:45,UPLOADER_EXCEPTION_T5215910:5215910})}),null);
__d("XProfilePicUploadAsyncController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/picture/upload/",{profile_id:{type:"Int",required:!0},photo_source:{type:"Enum",defaultValue:9,enumType:0}})}),null);
__d("ProfileTempPhotoUploader",["CSS","EventEmitter","FileInputUploader","JpegResizer","Parent","PhotosMimeType","XProfilePicUploadAsyncController","tidyEvent"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("EventEmitter"));g=c&&c.prototype;function a(a,c,d){"use strict";g.constructor.call(this),this.$ProfileTempPhotoUploader1=a,this.$ProfileTempPhotoUploader6=b("XProfilePicUploadAsyncController").getURIBuilder().setInt("profile_id",c).setEnum("photo_source",d).getURI(),b("JpegResizer").isSupported()&&(this.$ProfileTempPhotoUploader4=new(b("JpegResizer"))(1)),this.$ProfileTempPhotoUploader2=b("tidyEvent")(this.$ProfileTempPhotoUploader1.subscribe("change",function(){return this.attemptUpload()}.bind(this)))}a.prototype.removeListener=function(){"use strict";this.$ProfileTempPhotoUploader2&&(this.$ProfileTempPhotoUploader2.unsubscribe(),this.$ProfileTempPhotoUploader2=null)};a.prototype.attemptUpload=function(){"use strict";__p&&__p();this.$ProfileTempPhotoUploader3&&this.$ProfileTempPhotoUploader3.abort();if(!this.$ProfileTempPhotoUploader1.getValue()){this.reset();return}var a=this.$ProfileTempPhotoUploader1.getInput();a.name||(a.name="photo");this.$ProfileTempPhotoUploader5=b("Parent").byClass(a,"stat_elem");this.$ProfileTempPhotoUploader5&&b("CSS").addClass(this.$ProfileTempPhotoUploader5,"async_saving");a=this.$ProfileTempPhotoUploader3=new(b("FileInputUploader"))(a).setURI(this.$ProfileTempPhotoUploader6).setAllowCrossOrigin(!0);this.emit("uploadStart",a);b("tidyEvent")([a.subscribe("success",function(a,b){this.reset(),this.emit("uploadSucess",b.response.getPayload())}.bind(this)),a.subscribe("failure",function(){this.reset(),this.emit("uploadFailure")}.bind(this))]);this.$ProfileTempPhotoUploader4&&a.setUploadInParallel(!0).setPreprocessHandler(this.$ProfileTempPhotoUploader7.bind(this));a.send()};a.prototype.reset=function(){"use strict";this.$ProfileTempPhotoUploader5&&b("CSS").removeClass(this.$ProfileTempPhotoUploader5,"async_saving"),this.$ProfileTempPhotoUploader3=null,this.$ProfileTempPhotoUploader1.clear()};a.prototype.$ProfileTempPhotoUploader7=function(a,c){"use strict";__p&&__p();var d=a.getFile();if(!d||!b("PhotosMimeType").isJpeg(d.type)){this.emit("resizeSkipped");c(a);return}this.$ProfileTempPhotoUploader4&&this.$ProfileTempPhotoUploader4.resizeBlob(d,function(b,d,e,f,g){if(b){this.emit("resizeFailure");c(a);return}e?this.emit("resizeSkipped"):(a.setFile(d),this.emit("resizeSuccess"));c(a)}.bind(this))};e.exports=a}),null);
__d("ProfilePicUploadToCrop",["PhotoSourceTypeConst","ProfilePicCropViewerInit","ProfilePictureFlowLogging","ProfileTempPhotoUploader"],(function(a,b,c,d,e,f){__p&&__p();function g(){return b("ProfilePicCropViewerInit").getFlowType()}function h(a,c,d,e,f){__p&&__p();arguments.length<=5||arguments[5]===undefined?!0:arguments[5];var g=arguments[6];this.$1=f;this.$2=e;this.$3=new(b("ProfileTempPhotoUploader"))(c,f,b("PhotoSourceTypeConst").PROFILE_PIC);this.$3.addListener("uploadStart",function(a){return this.uploadStart(a)}.bind(this));this.$3.addListener("uploadSucess",function(a){return this.uploadSucess(a)}.bind(this));this.$3.addListener("uploadFailure",function(){return this.uploadFailure()}.bind(this));this.$3.addListener("resizeSkipped",function(){return this.resizeSkipped()}.bind(this));this.$3.addListener("resizeStart",function(){return this.resizeStart()}.bind(this));this.$3.addListener("resizeSuccess",function(){return this.resizeSuccess()}.bind(this));this.$3.addListener("resizeFailure",function(){return this.resizeFailure()}.bind(this));this.$4=g}h.prototype.attemptUpload=function(){"use strict";this.$3.removeListener(),this.$3.attemptUpload()};h.prototype.resizeStart=function(){"use strict";b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_BEGIN)};h.prototype.resizeSkipped=function(){"use strict";b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_SKIPPED)};h.prototype.resizeSuccess=function(){"use strict";b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_SUCCESS)};h.prototype.resizeFailure=function(){"use strict";b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.RESIZE_FAIL)};h.prototype.uploadStart=function(a){"use strict";b("ProfilePictureFlowLogging").setAction(b("ProfilePictureFlowLogging").action.UPLOAD).setFlowType(g()).log(b("ProfilePictureFlowLogging").step.UPLOAD_SELECT),b("ProfilePicCropViewerInit").loading(this.$1,{uploadRequest:a})};h.prototype.uploadSucess=function(a){"use strict";h.loadCropper(a,this.$1,this.$2,this.$4)};h.prototype.uploadFailure=function(){"use strict";b("ProfilePicCropViewerInit").close(),b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.FAIL)};h.loadCropper=function(a,c,d,e){"use strict";b("ProfilePictureFlowLogging").setFlowType(g()).log(b("ProfilePictureFlowLogging").step.UPLOAD_SUCCESS),b("ProfilePicCropViewerInit").loadID(a.fbid,c,{method:"upload",source:d,warnOnCancel:!0,successCallback:e})};e.exports=h}),null);
__d("ProfilePicDragAndDropUpload",["ProfilePicCropViewerInit","ProfilePictureFlowLogging","ProfilePicUploadToCrop","SinglePictureUploadTarget"],(function(a,b,c,d,e,f){a={init:function(a,c,d){var e=new(b("SinglePictureUploadTarget"))(a,c).setAllowCrossOrigin(!0).setPreprocessCallback(function(){b("ProfilePictureFlowLogging").setFlowType(b("ProfilePicCropViewerInit").getFlowType()).log(b("ProfilePictureFlowLogging").step.DRAG_AND_DROP),b("ProfilePicCropViewerInit").loading(d,{uploadRequest:e})}).setAfterSuccessCallback(function(a){b("ProfilePicUploadToCrop").loadCropper(a,d,"timeline")}).activate()}};e.exports=a}),null);
__d("TimelineCoverDragdropEdit",["SinglePictureUploadTarget","TimelineCover"],(function(a,b,c,d,e,f){__p&&__p();var g=function(){var a=b("TimelineCover").getInstance();a.hideLoadingIndicator()},h=function(a){var c=b("TimelineCover").getInstance(),d=a.id;a=a.photo_node;c.updateCoverImage(d,a)},i=function(a){b("TimelineCover").getInstance().showLoadingIndicator()};a=function(a,c){new(b("SinglePictureUploadTarget"))(a,c).setAllowCrossOrigin(!0).setPreprocessCallback(i).setOncompleteCallback(g).setAfterSuccessCallback(h).activate()};f.initialize_timeline_cover_drop_target=a}),null);
__d("TimelineCoverPhotoChangePrivacyDialog",["Arbiter","Event"],(function(a,b,c,d,e,f){a={init:function(a,b,c){this._dialog=a,this._tooltipLink=c,this._closeButton=b,this._showDialog=!1,this._tooltip=null},registerDialogShow:function(){this._showDialog=!0,b("Arbiter").subscribe("CoverPhotoEdit",function(a,b){if(!this._showDialog)return;b.state==="open"?(this._dialog&&this._dialog.show(),this._tooltipLink&&(this._tooltip=this._tooltipLink.getAttribute("data-hover"),this._tooltipLink.setAttribute("data-hover",null))):b.state==="closed"&&this.hideDialog()}.bind(this)),b("Event").listen(this._closeButton,"click",this.hideDialog.bind(this))},hideDialog:function(){this._dialog&&this._dialog.hide(),this._tooltipLink&&this._tooltipLink.setAttribute("data-hover",this._tooltip),this._showDialog=!1}};e.exports=a}),null);
__d("ProfileWizardUIEvents",[],(function(a,b,c,d,e,f){a=Object.freeze({CUSTOM_HIDE_HANDLE:"ProfileWizardUIEvents/customHideHandle",CUSTOM_SHOW_HANDLE:"ProfileWizardUIEvents/customShowHandle",HIDE_POPUP:"ProfileWizardUIEvents/hidePopup",PROFILE_PIC_UPLOADED:"ProfileWizardUIEvents/profilePicUploaded",SHOW_POPUP:"ProfileWizardUIEvents/showPopup",STEP_COMPLETE:"ProfileWizardUIEvents/stepComplete",STEP_EDITED:"ProfileWizardUIEvents/stepEdited"});e.exports=a}),null);
__d("XProfileWizardImpressionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/wizard_impression/{surface}/",{error_code:{type:"Int"},step:{type:"Int",required:!0},surface:{type:"Enum",required:!0,enumType:1}})}),null);
__d("ProfileWizardUIManager",["invariant","Arbiter","AsyncRequest","ProfileWizardUIEvents","XProfileWizardImpressionController","destroyOnUnload"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){var c=arguments.length<=1||arguments[1]===undefined?null:arguments[1];this.$1=a;this.$2=c||this.$1[0];var d=b("Arbiter").subscribe(b("ProfileWizardUIEvents").STEP_COMPLETE,this.stepComplete.bind(this));c!=null&&h.informShowPopupForStep(c);b("destroyOnUnload")(function(){return d.unsubscribe()})}h.prototype.stepComplete=function(a,b){"use strict";a=this.getNextStepIndex(b.stepNumber);a&&(h.informShowPopupForStep(a),this.$2=a)};h.prototype.getCurrentStepIndex=function(){"use strict";return this.$2};h.prototype.getNextStepIndex=function(a){"use strict";a=this.$1.indexOf(a);a!==-1||g(0);return a<this.$1.length-1?this.$1[a+1]:null};h.prototype.hasNextStep=function(){"use strict";return!!this.getNextStepIndex(this.getCurrentStepIndex())};h.informShowPopupForStep=function(a){"use strict";b("Arbiter").inform(b("ProfileWizardUIEvents").SHOW_POPUP+a,{stepNumber:a},b("Arbiter").BEHAVIOR_PERSISTENT)};h.informHidePopupForStep=function(a){"use strict";b("Arbiter").inform(b("ProfileWizardUIEvents").HIDE_POPUP+a,{stepNumber:a},b("Arbiter").BEHAVIOR_PERSISTENT)};h.informStepComplete=function(a){"use strict";b("Arbiter").inform(b("ProfileWizardUIEvents").STEP_COMPLETE,{stepNumber:a})};h.informCustomShowHandler=function(a){"use strict";b("Arbiter").inform(b("ProfileWizardUIEvents").CUSTOM_SHOW_HANDLE+a,{stepNumber:a},b("Arbiter").BEHAVIOR_PERSISTENT)};h.informCustomHideHandler=function(a){"use strict";b("Arbiter").inform(b("ProfileWizardUIEvents").CUSTOM_HIDE_HANDLE+a,{stepNumber:a},b("Arbiter").BEHAVIOR_PERSISTENT)};h.subscribeShowPopupForStep=function(a,c,d){"use strict";return h.$3(b("ProfileWizardUIEvents").SHOW_POPUP,a,d)};h.subscribeHidePopupForStep=function(a,c,d){"use strict";return h.$3(b("ProfileWizardUIEvents").HIDE_POPUP,a,d)};h.subscribeCustomShowHandler=function(a,c){"use strict";return h.$3(b("ProfileWizardUIEvents").CUSTOM_SHOW_HANDLE,a,c)};h.subscribeCustomHideHandler=function(a,c){"use strict";return h.$3(b("ProfileWizardUIEvents").CUSTOM_HIDE_HANDLE,a,c)};h.$3=function(event,a,c){"use strict";var d=b("Arbiter").subscribe(event+a,c);b("destroyOnUnload")(function(){return d.unsubscribe()});return d};h.markStepImpression=function(a,c){"use strict";a=b("XProfileWizardImpressionController").getURIBuilder().setInt("step",a).setEnum("surface",c).getURI();new(b("AsyncRequest"))().setURI(a).send()};h.init=function(a){var b=arguments.length<=1||arguments[1]===undefined?null:arguments[1];return new h(a,b)};e.exports=h}),null);
__d("XTimelineCoverPhotoGalleryController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/timeline/cover/gallery/",{})}),null);
__d("TimelineCoverPhotoNUX",["cx","AsyncRequest","CSS","ProfileWizardUIManager","XTimelineCoverPhotoGalleryController","$","destroyOnUnload"],(function(a,b,c,d,e,f,g){__p&&__p();var h="fbProfileCover",i="_3y4k";a={init:function(a,c,d,e){__p&&__p();this._dialog=c;this._coverPhotoContainer=b("$")(h);this._popover=a.getPopover();this._hasCoverPhoto=e;b("ProfileWizardUIManager").subscribeCustomShowHandler(d,function(){return this._showDialog()}.bind(this));b("ProfileWizardUIManager").subscribeCustomHideHandler(d,function(){return this._hideDialog()}.bind(this));this._popoverToken=this._popover.subscribeOnce("show",function(){if(this._hasCoverPhoto||this._showDialogCalled)return;this._popover.hideLayer();this._showDialog()}.bind(this));var f=this._dialog.subscribe("cancel",function(){b("CSS").removeClass(this._coverPhotoContainer,i)}.bind(this)),g=this._dialog.subscribe("confirm",function(){this._popover.showLayer(),this._hideDialog()}.bind(this));b("destroyOnUnload")(function(){this._dialog.unsubscribe(f),this._dialog.unsubscribe(g),this._popover.unsubscribe(this._popoverToken)}.bind(this))},_hideDialog:function(){this._dialog.hide(),b("CSS").removeClass(this._coverPhotoContainer,i)},_showDialog:function(){if(this._showDialogCalled)return;this._dialog.show();this._hasCoverPhoto||(b("CSS").addClass(this._coverPhotoContainer,i),new(b("AsyncRequest"))().setURI(b("XTimelineCoverPhotoGalleryController").getURIBuilder().getURI()).send());this._showDialogCalled=!0}};e.exports=a}),null);
__d("TimelineProfilePic",["Arbiter","CSS","Dialog","DOM","HTML","TimelineProfilePicConfig","Run","$","ge"],(function(a,b,c,d,e,f){__p&&__p();var g=void 0;h.init=function(a,b){"use strict";h.destroyInstance(),g=new h(a||"fbProfileCover",b||".profilePicThumb")};function h(a,c){"use strict";this.$1=b("$")(a),this.$2=c,this.$3=[b("Arbiter").subscribe(b("TimelineProfilePicConfig").loading,this.startLoading.bind(this)),b("Arbiter").subscribe(b("TimelineProfilePicConfig").success,this.onUploadSuccess.bind(this))],b("Run").onBeforeUnload(this.onBeforeUnload.bind(this)),b("Run").onLeave(this.destroy.bind(this))}h.prototype.$4=function(a){"use strict";this.$5=a,b("CSS").conditionClass(this.$1,"profilePicLoading",a)};h.prototype.destroy=function(){"use strict";this.$3.forEach(function(a){a.unsubscribe()}),this.$3=[],g=null};h.prototype.startLoading=function(a,b){"use strict";this.$4(!!b.isLoading)};h.prototype.onUploadSuccess=function(a,c){"use strict";__p&&__p();this.$4(!1);if(!c.newPic)return;a=b("Dialog").getCurrent();a&&a.hide();a=c.newPic;b("DOM").replace(b("DOM").find(this.$1,this.$2),typeof a==="string"?b("HTML")(a):a);if(typeof c.profileId!==undefined&&typeof c.headerPicURL!==undefined){a=b("ge")("profile_pic_header_"+c.profileId);a&&(a.src=c.headerPicURL)}a=b("ge")("fbProfilePicSelector");a&&b("CSS").removeClass(a,"fbTimelineNullProfilePicSelector")};h.prototype.onBeforeUnload=function(){"use strict";if(g===this&&this.$5)return b("TimelineProfilePicConfig").leavingMessage};h.destroyInstance=function(){"use strict";g&&g.destroy()};e.exports=h}),null);
__d("XProfileRefresherDialogImpressionController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/profile/refresher/dialog_impression/",{})}),null);
__d("ProfileActionsUpdateInfoButton",["AsyncRequest","CSS","Event","XProfileRefresherDialogImpressionController","destroyOnUnload"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d){"use strict";void 0,this.$1=b("Event").listen(a,"click",function(){c.hide(),b("CSS").hide(d),this.$2()}.bind(this)),c.subscribe("cancel",function(){return this.$2()}.bind(this)),b("destroyOnUnload")(function(){return this.$3()}.bind(this))}a.prototype.$3=function(){"use strict";this.$1&&this.$1.remove()};a.prototype.$2=function(){"use strict";new(b("AsyncRequest"))().setURI(b("XProfileRefresherDialogImpressionController").getURIBuilder().getURI()).send()};e.exports=a}),null);
__d("ProfileWizardStepFlyout",["DOMScroll","Event","ProfileWizardUIManager","destroyOnUnload"],(function(a,b,c,d,e,f){__p&&__p();function a(a,c,d){"use strict";__p&&__p();b("ProfileWizardUIManager").subscribeShowPopupForStep(c,d,function(){b("DOMScroll").scrollTo(a.getCausalElement(),500,!1,0,20,function(){b("ProfileWizardUIManager").informCustomShowHandler(c),a.show()})});b("ProfileWizardUIManager").subscribeHidePopupForStep(c,d,function(){b("ProfileWizardUIManager").informCustomHideHandler(c),a.hide()});var e=b("Event").listen(a.getCausalElement(),"click",function(){return b("ProfileWizardUIManager").informHidePopupForStep(c)}),f=[a.subscribe("cancel",function(){b("ProfileWizardUIManager").informStepComplete(c),b("ProfileWizardUIManager").markStepImpression(c,d)}),a.subscribe("confirm",function(){a.hide(),b("ProfileWizardUIManager").markStepImpression(c,d)})];b("destroyOnUnload")(function(){while(f.length)a.unsubscribe(f.pop());e.remove()})}e.exports=a}),null);
__d("XMeEndpointController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/me/{*view}/",{view:{type:"String",defaultValue:""}})}),null);
__d("ReactComposerMediaDialog.react",["cx","fbt","Arbiter","DialogExpansion","DOMContainer.react","FBConfirmDialog.react","LayerFadeOnShow","React","ReactComponentWithPureRenderMixin","ReactComposerEvents","ReactComposerHandleUnsavedChanges","ReactComposerMediaUtils","SubscriptionsHandler","XMeEndpointController","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogTitle.react","goURI","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=500,j=500;c=b("React").createClass({displayName:"ReactComposerMediaDialog",_subscriptions:b("SubscriptionsHandler"),mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{composerDOM:a.any.isRequired,composerID:a.string.isRequired,onDismiss:a.func.isRequired},getInitialState:function(){return{shown:!0,showConfirmDialog:!1}},UNSAFE_componentWillMount:function(){this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(b("Arbiter").subscribe(b("ReactComposerEvents").POST_SUCCEEDED+this.props.composerID,b("throttle")(this._success,j)))},componentWillUnmount:function(){this._subscriptions.release()},render:function(){var a=this.state.showConfirmDialog?this._renderDismissConfirmation():null;return b("React").createElement("div",null,a,b("React").createElement(b("XUIDialog.react"),{behaviors:{DialogExpansion:b("DialogExpansion"),LayerFadeOnShow:b("LayerFadeOnShow")},className:"_51ly",shown:this.state.shown,width:i,layerHideOnBlur:!1},b("React").createElement(b("XUIDialogTitle.react"),{showCloseButton:!1},h._("Upload Photos\/Videos"),b("React").createElement(b("XUICloseButton.react"),{className:"_51-t",label:h._("\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),onClick:this._showConfirmDialog})),b("React").createElement(b("XUIDialogBody.react"),{className:"_51lz"},b("React").createElement(b("DOMContainer.react"),null,this.props.composerDOM))))},_renderDismissConfirmation:function(){return b("React").createElement(b("FBConfirmDialog.react"),{content:b("ReactComposerHandleUnsavedChanges").getUnsavedChangesMessage(this.props.composerID),onCancel:this._cancelDismiss,onConfirm:this._dismiss,onToggle:this._cancelDismiss,shown:!0,title:h._("\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f"),cancelButtonText:h._("\u041d\u0435\u0442"),confirmButtonText:h._("\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f")})},_showConfirmDialog:function(){this.setState({showConfirmDialog:!0})},_cancelDismiss:function(){this.setState({showConfirmDialog:!1})},_dismiss:function(){this.setState({shown:!1,showConfirmDialog:!1}),this.props.onDismiss&&this.props.onDismiss()},_success:function(){this._dismiss();var a=b("XMeEndpointController").getURIBuilder().setString("view","timeline").getURI();b("goURI")(a)}});e.exports=c}),null);
__d("ReactComposerTimelineStore",["ReactComposerActionStore","ReactComposerMediaConfig","ReactComposerPostUtils","ReactComposerStore","TimelineComposer","DateConsts"],(function(a,b,c,d,e,f){__p&&__p();var g;c=babelHelpers.inherits(a,b("ReactComposerActionStore"));g=c&&c.prototype;function a(){"use strict";g.constructor.call(this)}a.prototype.__onPostStarted=function(a){"use strict";var c=b("ReactComposerStore").getScheduledPublishTime(a.composerID);if(c){c=Math.round(c/b("DateConsts").MS_PER_SEC);a.config.contextInfo.scheduled=!0;a.config.contextInfo.unpublished_content_type="SCHEDULED";a.config.contextInfo.scheduled_publish_time=c}b("ReactComposerPostUtils").post({actorID:a.actorID,composerConfig:a.config,composerID:a.composerID,targetID:a.targetID})};a.prototype.__canPost=function(a){"use strict";return!b("ReactComposerPostUtils").isPostButtonDisabled(a.composerID,b("ReactComposerMediaConfig").photo.limit)};a.prototype.__cleanup=function(a){"use strict"};e.exports=new a()}),null);
__d("ReactComposerTimelineMediaPostButtonContainer.react",["React","ReactComposerContextTypes","ReactComposerMediaPostButtonContainerMixin","ReactComposerTimelineStore"],(function(a,b,c,d,e,f){a=b("React").createClass({displayName:"ReactComposerTimelineMediaPostButtonContainer",contextTypes:b("ReactComposerContextTypes"),mixins:[b("ReactComposerMediaPostButtonContainerMixin")],getDefaultProps:function(){return{useDefaultScheduleComponent:!0}},componentDidMount:function(){b("ReactComposerTimelineStore").registerComposerID(this.context.composerID)}});e.exports=a}),null);
__d("ReactMediaComposer.react",["cx","Arbiter","React","ReactComposer.react","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerBodyContainer.react","ReactComposerConfig","ReactComposerContextConfig","ReactComposerContextProviderMixin","ReactComposerEvents","ReactComposerMediaEagerAttachment.react","ReactComposerPrefillConfig","ReactComposerPrefillUtils","ReactComposerStatusEagerAttachment.react","ReactComposerTimelineMediaPostButtonContainer.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=b("React").createClass({displayName:"ReactMediaComposer",mixins:[b("ReactComposerContextProviderMixin")],propTypes:{contextConfig:b("ReactComposerContextConfig").isRequired,config:b("ReactComposerConfig").isRequired,prefillConfig:b("ReactComposerPrefillConfig").isRequired},UNSAFE_componentWillMount:function(){b("ReactComposerPrefillUtils").prefill(this.props.contextConfig.composerID,this.props.prefillConfig)},componentDidMount:function(){var a=this.props.prefillConfig;a&&a.selectedAttachment&&(b("ReactComposerAttachmentActions").selectAttachment(this.props.contextConfig.composerID,a.selectedAttachment,a.shouldActivateSelectedAttachment),a.shouldActivateSelectedAttachment&&b("Arbiter").inform(b("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.props.contextConfig.composerID))},render:function(){var a=this.props.prefillConfig.selectedAttachment;a=this._getAttachments(a);return b("React").createElement(b("ReactComposer.react"),{className:"_1nby",loggingConfig:this.props.config.loggingConfig,activateOnInit:!0,activateOnInitEntryPoint:this.props.config.triggeredFrom},b("React").createElement(b("ReactComposerBodyContainer.react"),{expanded:this.props.config.showExpandedComposer},a,this.props.children))},_getAttachments:function(a){var c=[];c.push(b("React").createElement(b("ReactComposerStatusEagerAttachment.react"),{config:this.props.config,key:"status",prefillConfig:this.props.prefillConfig,postButtonModule:b("ReactComposerTimelineMediaPostButtonContainer.react"),selected:a===b("ReactComposerAttachmentType").STATUS,scrapeLinkOnInit:!1}));c.push(b("React").createElement(b("ReactComposerMediaEagerAttachment.react"),{key:"media",config:this.props.config,prefillConfig:this.props.prefillConfig,postButtonModule:b("ReactComposerTimelineMediaPostButtonContainer.react"),selected:a===b("ReactComposerAttachmentType").MEDIA}));return c}});e.exports=a}),null);
__d("ReactMediaComposerInit",["AsyncRequest","Bootloader","CSS","DOM","Event","PUWMethods","React","ReactComposerAttachmentActions","ReactComposerAttachmentType","ReactComposerConfig","ReactComposerContextConfig","ReactComposerInit","ReactComposerLoggingName","ReactComposerMediaDialog.react","ReactComposerPrefillConfig","ReactDOM","ReactMediaComposer.react","Run","$"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_composerDOM:null,_mountContainer:null,init:function(a){__p&&__p();this._composerDOM=b("DOM").create("div");this._mountContainer=b("DOM").create("div");var c=b("$")("timeline-medley"),d=a.contextConfig.composerID;c=b("DOM").scry(c,'input[name="composer_photo[]"]')[0];var e=b("ReactComposerAttachmentType").STATUS;c&&(this._inputDOM=c,b("Event").listen(this._inputDOM,"change",function(){this._inputDOM.files&&this._inputDOM.files.length>0&&(this._uploadExistingFiles(this._inputDOM.files,d,a),b("ReactComposerAttachmentActions").selectAttachment(d,b("ReactComposerAttachmentType").MEDIA,!0,b("ReactComposerLoggingName").MEDIA_COMPOSER_ON_INIT))}.bind(this)),c.files&&c.files.length>0&&(e=b("ReactComposerAttachmentType").MEDIA,this._uploadExistingFiles(c.files,d,a)));a.prefillConfig={selectedAttachment:e,shouldActivateSelectedAttachment:!0};b("ReactComposerInit").init(b("ReactMediaComposer.react"),a,this._composerDOM);b("ReactDOM").render(b("React").createElement(b("ReactComposerMediaDialog.react"),{composerDOM:this._composerDOM,composerID:d,onDismiss:this._cleanup.bind(this)}),this._mountContainer);b("DOM").appendContent(document.body,this._mountContainer);b("Run").onUnload(this._cleanup.bind(this));b("Run").onLeave(this._cleanup.bind(this))},_cleanup:function(){setTimeout(function(){this._composerDOM&&b("ReactDOM").unmountComponentAtNode(this._composerDOM),this._mountContainer&&b("ReactDOM").unmountComponentAtNode(this._mountContainer)}.bind(this),0)},_uploadExistingFiles:function(a,c,d){var e=d.config.attachmentsConfig[b("ReactComposerAttachmentType").MEDIA];b("Bootloader").loadModules(["ReactComposerMediaUtils","ReactComposerPhotoUploader"],function(f,g){return f.uploadPhotosOrVideo(c,Array.prototype.slice.call(a),new g(d.contextConfig,e.photoLimit,{disableFaceRecognition:e.disableFaceboxTagger}),d.config.targetData.targetSupportsMultiplePhotos,b("PUWMethods").FILE_SELECTOR,d.config.targetData.targetSupportsMultiMedia,e)},"ReactMediaComposerInit")},setupFileUploadToComposerDialog:function(a,c,d){var e=function(c){b("CSS").conditionClass(a.getControl(),d,c),a.getInput().disabled=c};a.subscribe("change",function(){new(b("AsyncRequest"))().setURI(c).setErrorHandler(function(){a.clear(),e(!1)}).setHandler(function(){e(!1)}).send(),e(!0)})}};e.exports=a}),null);